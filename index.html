<!DOCTYPE html>
<html lang="en">
    <head>
        <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0">
        <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/bootstrap/3.0.2/css/bootstrap.min.css"/>
        <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.min.css"/>
        <link rel="stylesheet" href="src/css/xmas-pi.css"/>
       
        <title>X-Mas</title>
    <body>
        <div id="toolbar" class="container text-center">
            <div class="row">
                <div class="col-lg-12 col-md-12 col-sm12 col-xs-12">
                    <div class="btn-group btn-group-lg">
                        <button id="toggle-eraser" class="btn btn-default" data-toggle="button">
                            <i class="fa fa-eraser"></i>
                        </button>
                        <button id="inverse-frame" class="btn btn-default">
                            <i class="fa fa-minus-square-o"></i>
                        </button>
                        <button id="clear-frame" class="btn btn-default">
                            <i class="fa fa-times-circle"></i>
                        </button>
                        <button id="help" class="btn btn-default" data-toggle="modal" data-target="#helpModal">
                            <i class="fa fa-question-circle"></i>
                        </button>
                        <button id="frame-counter" class="btn btn-default">1</button>
                    </div>
                </div>
            </div>
        </div>
        <div id="tree-wrapper" class="text-center">
            <!-- TREE -->
            <div class="row">
                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                    <button id="1" class="btn btn-link light">
                        <i class="fa fa-square-o fa-2x visible-lg"></i>
                        <i class="fa fa-square-o fa-2x visible-md"></i>
                        <i class="fa fa-square-o fa-2x visible-sm"></i>
                        <i class="fa fa-square-o fa-2x visible-xs"></i>
                    </button>
                </div>
            </div>
            <div class="row">
                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                    <button id="2" class="btn btn-link light">
                        <i class="fa fa-square-o fa-2x visible-lg"></i>
                        <i class="fa fa-square-o fa-2x visible-md"></i>                    
                        <i class="fa fa-square-o fa-2x visible-sm"></i>                   
                        <i class="fa fa-square-o fa-2x visible-xs"></i>
                    </button>
                </div>
            </div>
            <div class="row">
                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                    <button id="3" class="btn btn-link light">
                        <i class="fa fa-square-o fa-2x visible-lg"></i>
                        <i class="fa fa-square-o fa-2x visible-md"></i>
                        <i class="fa fa-square-o fa-2x visible-sm"></i>
                        <i class="fa fa-square-o fa-2x visible-xs"></i>
                    </button>
                    <button id="4" class="btn btn-link light">
                        <i class="fa fa-square-o fa-2x visible-lg"></i>          
                        <i class="fa fa-square-o fa-2x visible-md"></i>     
                        <i class="fa fa-square-o fa-2x visible-sm"></i>     
                        <i class="fa fa-square-o fa-2x visible-xs"></i>
                    </button>
                    <button id="5" class="btn btn-link light">
                        <i class="fa fa-square-o fa-2x visible-lg"></i>          
                        <i class="fa fa-square-o fa-2x visible-md"></i>          
                        <i class="fa fa-square-o fa-2x visible-sm"></i>           
                        <i class="fa fa-square-o fa-2x visible-xs"></i>
                    </button>
                </div>
            </div>
            <div class="row">
                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                    <button id="6" class="btn btn-link light">
                        <i class="fa fa-square-o fa-2x visible-lg"></i>
                        <i class="fa fa-square-o fa-2x visible-md"></i>
                        <i class="fa fa-square-o fa-2x visible-sm"></i>
                        <i class="fa fa-square-o fa-2x visible-xs"></i>
                    </button>
                    <button id="7" class="btn btn-link light">
                        <i class="fa fa-square-o fa-2x visible-lg"></i>
                        <i class="fa fa-square-o fa-2x visible-md"></i>
                        <i class="fa fa-square-o fa-2x visible-sm"></i>
                        <i class="fa fa-square-o fa-2x visible-xs"></i>
                    </button>
                    <button id="8" class="btn btn-link light">
                        <i class="fa fa-square-o fa-2x visible-lg"></i>
                        <i class="fa fa-square-o fa-2x visible-md"></i>
                        <i class="fa fa-square-o fa-2x visible-sm"></i>
                        <i class="fa fa-square-o fa-2x visible-xs"></i>
                    </button>
                </div>
            </div>
            <div class="row">
                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                    <button id="9" class="btn btn-link light">
                        <i class="fa fa-square-o fa-2x visible-lg"></i>
                        <i class="fa fa-square-o fa-2x visible-md"></i>
                        <i class="fa fa-square-o fa-2x visible-sm"></i>
                        <i class="fa fa-square-o fa-2x visible-xs"></i>
                    </button>
                    <button id="10" class="btn btn-link light">
                        <i class="fa fa-square-o fa-2x visible-lg"></i>
                        <i class="fa fa-square-o fa-2x visible-md"></i>
                        <i class="fa fa-square-o fa-2x visible-sm"></i>
                        <i class="fa fa-square-o fa-2x visible-xs"></i>
                    </button>
                    <button id="11" class="btn btn-link light">
                        <i class="fa fa-square-o fa-2x visible-lg"></i>
                        <i class="fa fa-square-o fa-2x visible-md"></i>
                        <i class="fa fa-square-o fa-2x visible-sm"></i>
                        <i class="fa fa-square-o fa-2x visible-xs"></i>
                    </button>
                    <button id="12" class="btn btn-link light">
                        <i class="fa fa-square-o fa-2x visible-lg"></i>
                        <i class="fa fa-square-o fa-2x visible-md"></i>
                        <i class="fa fa-square-o fa-2x visible-sm"></i>
                        <i class="fa fa-square-o fa-2x visible-xs"></i>
                    </button>
                    <button id="13" class="btn btn-link light">
                        <i class="fa fa-square-o fa-2x visible-lg"></i>
                        <i class="fa fa-square-o fa-2x visible-md"></i>
                        <i class="fa fa-square-o fa-2x visible-sm"></i>
                        <i class="fa fa-square-o fa-2x visible-xs"></i>
                    </button>
                </div>
            </div>
            <div class="row">
                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                    <button id="14" class="btn btn-link light">
                        <i class="fa fa-square-o fa-2x visible-lg"></i>
                        <i class="fa fa-square-o fa-2x visible-md"></i>
                        <i class="fa fa-square-o fa-2x visible-sm"></i>
                        <i class="fa fa-square-o fa-2x visible-xs"></i>
                    </button>
                    <button id="15" class="btn btn-link light">
                        <i class="fa fa-square-o fa-2x visible-lg"></i>
                        <i class="fa fa-square-o fa-2x visible-md"></i>
                        <i class="fa fa-square-o fa-2x visible-sm"></i>
                        <i class="fa fa-square-o fa-2x visible-xs"></i>
                    </button>
                    <button id="16" class="btn btn-link light">
                        <i class="fa fa-square-o fa-2x visible-lg"></i>
                        <i class="fa fa-square-o fa-2x visible-md"></i>
                        <i class="fa fa-square-o fa-2x visible-sm"></i>
                        <i class="fa fa-square-o fa-2x visible-xs"></i>
                    </button>
                    <button id="17" class="btn btn-link light">
                        <i class="fa fa-square-o fa-2x visible-lg"></i>
                        <i class="fa fa-square-o fa-2x visible-md"></i>
                        <i class="fa fa-square-o fa-2x visible-sm"></i>
                        <i class="fa fa-square-o fa-2x visible-xs"></i>
                    </button>
                    <button id="18" class="btn btn-link light">
                        <i class="fa fa-square-o fa-2x visible-lg"></i>
                        <i class="fa fa-square-o fa-2x visible-md"></i>
                        <i class="fa fa-square-o fa-2x visible-sm"></i>
                        <i class="fa fa-square-o fa-2x visible-xs"></i>
                    </button>
                </div>
            </div>
            <div class="row">
                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                    <button id="19" class="btn btn-link light">
                        <i class="fa fa-square-o fa-2x visible-lg"></i>
                        <i class="fa fa-square-o fa-2x visible-md"></i>
                        <i class="fa fa-square-o fa-2x visible-sm"></i>
                        <i class="fa fa-square-o fa-2x visible-xs"></i>
                    </button>
                    <button id="20" class="btn btn-link light">
                        <i class="fa fa-square-o fa-2x visible-lg"></i>
                        <i class="fa fa-square-o fa-2x visible-md"></i>
                        <i class="fa fa-square-o fa-2x visible-sm"></i>
                        <i class="fa fa-square-o fa-2x visible-xs"></i>
                    </button>
                    <button id="21" class="btn btn-link light">
                        <i class="fa fa-square-o fa-2x visible-lg"></i>
                        <i class="fa fa-square-o fa-2x visible-md"></i>
                        <i class="fa fa-square-o fa-2x visible-sm"></i>
                        <i class="fa fa-square-o fa-2x visible-xs"></i>
                    </button>
                    <button id="22" class="btn btn-link light">
                        <i class="fa fa-square-o fa-2x visible-lg"></i>
                        <i class="fa fa-square-o fa-2x visible-md"></i>
                        <i class="fa fa-square-o fa-2x visible-sm"></i>
                        <i class="fa fa-square-o fa-2x visible-xs"></i>
                    </button>
                    <button id="23" class="btn btn-link light">
                        <i class="fa fa-square-o fa-2x visible-lg"></i>
                        <i class="fa fa-square-o fa-2x visible-md"></i>
                        <i class="fa fa-square-o fa-2x visible-sm"></i>
                        <i class="fa fa-square-o fa-2x visible-xs"></i>
                    </button>
                    <button id="24" class="btn btn-link light">
                        <i class="fa fa-square-o fa-2x visible-lg"></i>
                        <i class="fa fa-square-o fa-2x visible-md"></i>
                        <i class="fa fa-square-o fa-2x visible-sm"></i>
                        <i class="fa fa-square-o fa-2x visible-xs"></i>
                    </button>
                    <button id="25" class="btn btn-link light">
                        <i class="fa fa-square-o fa-2x visible-lg"></i>
                        <i class="fa fa-square-o fa-2x visible-md"></i>
                        <i class="fa fa-square-o fa-2x visible-sm"></i>
                        <i class="fa fa-square-o fa-2x visible-xs"></i>
                    </button>
                </div>
            </div>
            <div class="row">
                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                    <button id="26" class="btn btn-link light">
                        <i class="fa fa-square-o fa-2x visible-lg"></i>
                        <i class="fa fa-square-o fa-2x visible-md"></i>
                        <i class="fa fa-square-o fa-2x visible-sm"></i>
                        <i class="fa fa-square-o fa-2x visible-xs"></i>
                    </button>
                    <button id="27" class="btn btn-link light">
                        <i class="fa fa-square-o fa-2x visible-lg"></i>
                        <i class="fa fa-square-o fa-2x visible-md"></i>
                        <i class="fa fa-square-o fa-2x visible-sm"></i>
                        <i class="fa fa-square-o fa-2x visible-xs"></i>
                    </button>
                    <button id="28" class="btn btn-link light">
                        <i class="fa fa-square-o fa-2x visible-lg"></i>
                        <i class="fa fa-square-o fa-2x visible-md"></i>
                        <i class="fa fa-square-o fa-2x visible-sm"></i>
                        <i class="fa fa-square-o fa-2x visible-xs"></i>
                    </button>
                    <button id="29" class="btn btn-link light">
                        <i class="fa fa-square-o fa-2x visible-lg"></i>
                        <i class="fa fa-square-o fa-2x visible-md"></i>
                        <i class="fa fa-square-o fa-2x visible-sm"></i>
                        <i class="fa fa-square-o fa-2x visible-xs"></i>
                    </button>
                    <button id="30" class="btn btn-link light">
                        <i class="fa fa-square-o fa-2x visible-lg"></i>
                        <i class="fa fa-square-o fa-2x visible-md"></i>
                        <i class="fa fa-square-o fa-2x visible-sm"></i>
                        <i class="fa fa-square-o fa-2x visible-xs"></i>
                    </button>
                    <button id="31" class="btn btn-link light">
                        <i class="fa fa-square-o fa-2x visible-lg"></i>
                        <i class="fa fa-square-o fa-2x visible-md"></i>
                        <i class="fa fa-square-o fa-2x visible-sm"></i>
                        <i class="fa fa-square-o fa-2x visible-xs"></i>
                    </button>
                    <button id="32" class="btn btn-link light">
                        <i class="fa fa-square-o fa-2x visible-lg"></i>
                        <i class="fa fa-square-o fa-2x visible-md"></i>
                        <i class="fa fa-square-o fa-2x visible-sm"></i>
                        <i class="fa fa-square-o fa-2x visible-xs"></i>
                    </button>
                </div>
            </div>
            <div class="row">
                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                    <button id="33" class="btn btn-link light">
                        <i class="fa fa-square-o fa-2x visible-lg"></i>
                        <i class="fa fa-square-o fa-2x visible-md"></i>
                        <i class="fa fa-square-o fa-2x visible-sm"></i>
                        <i class="fa fa-square-o fa-2x visible-xs"></i>
                    </button>
                    <button id="34" class="btn btn-link light">
                        <i class="fa fa-square-o fa-2x visible-lg"></i>
                        <i class="fa fa-square-o fa-2x visible-md"></i>
                        <i class="fa fa-square-o fa-2x visible-sm"></i>
                        <i class="fa fa-square-o fa-2x visible-xs"></i>
                    </button>
                    <button id="35" class="btn btn-link light">
                        <i class="fa fa-square-o fa-2x visible-lg"></i>
                        <i class="fa fa-square-o fa-2x visible-md"></i>
                        <i class="fa fa-square-o fa-2x visible-sm"></i>
                        <i class="fa fa-square-o fa-2x visible-xs"></i>
                    </button>
                </div>
            </div>
            <div class="row">
                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                    <button id="36" class="btn btn-link light">
                        <i class="fa fa-square-o fa-2x visible-lg"></i>
                        <i class="fa fa-square-o fa-2x visible-md"></i>
                        <i class="fa fa-square-o fa-2x visible-sm"></i>
                        <i class="fa fa-square-o fa-2x visible-xs"></i>
                    </button>
                </div>
            </div>
            <div class="row">
                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                    <button id="37" class="btn btn-link light">
                        <i class="fa fa-square-o fa-2x visible-lg"></i>
                        <i class="fa fa-square-o fa-2x visible-md"></i>
                        <i class="fa fa-square-o fa-2x visible-sm"></i>
                        <i class="fa fa-square-o fa-2x visible-xs"></i>
                    </button>
                </div>
            </div>
            <div class="row">
                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                    <button id="38" class="btn btn-link light">
                        <i class="fa fa-square-o fa-2x visible-lg"></i>
                        <i class="fa fa-square-o fa-2x visible-md"></i>
                        <i class="fa fa-square-o fa-2x visible-sm"></i>
                        <i class="fa fa-square-o fa-2x visible-xs"></i>
                    </button>
                    <button id="39" class="btn btn-link light">
                        <i class="fa fa-square-o fa-2x visible-lg"></i>
                        <i class="fa fa-square-o fa-2x visible-md"></i>
                        <i class="fa fa-square-o fa-2x visible-sm"></i>
                        <i class="fa fa-square-o fa-2x visible-xs"></i>
                    </button>
                    <button id="40" class="btn btn-link light">
                        <i class="fa fa-square-o fa-2x visible-lg"></i>
                        <i class="fa fa-square-o fa-2x visible-md"></i>
                        <i class="fa fa-square-o fa-2x visible-sm"></i>
                        <i class="fa fa-square-o fa-2x visible-xs"></i>
                    </button>
                </div>
            </div>
        </div>
        <div id="toolbar" class="container text-center">
            <div class="row">
                <div class="col-lg-12 col-md-12 col-sm12 col-xs-12">
                    <div class="btn-group btn-group-lg">
                        <button id="previous-frame" class="btn btn-default">
                            <i class="fa fa-arrow-left"></i>
                        </button>
                        <button id="add-frame" class="btn btn-default">
                            <i class="fa fa-plus-square"></i>
                        </button>
                        <button id="delete-frame" class="btn btn-default">
                            <i class="fa fa-trash-o"></i>
                        </button>
                        <button id="playback" class="btn btn-default">
                            <i class="fa fa-play-circle"></i>
                        </button>
                        <button id="next-frame" class="btn btn-default">
                            <i class="fa fa-arrow-right"></i>
                        </button>
                        <button id="to-json" class="btn btn-primary" data-toggle="modal" data-target="#submitModal">
                            <i class="fa fa-check"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>
        <!-- Submit Modal -->
        <div class="modal fade" id="submitModal" tabindex="-1" role="dialog" aria-labelledby="submitModal" aria-hidden="true">
          <div class="modal-dialog">
            <div class="modal-content">
              <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h4 class="modal-title" id="submitModal">Submit</h4>
              </div>
              <div id="submitModalBody" class="modal-body">
                <div id="submitModalBody-form" style="display: inline" class="container" style="width: 100%">
                    <div class="row">
                        <div class="col-mid-4">
                            <form action="#" method="post" class="form">
                            <div>
                                <h3 class="text-center">
                                    Type in your name</h3>
                                <div class="form-group" style="width:70%; margin: 20px auto" >
                                    <input type="text" class="form-control" id="name" placeholder="Name" required/>
                                </div>
                                <a id="submit" class="btn btn-danger btn-sm btn-block" role="button" style="width: 70%; margin: 0 auto">Send it!</a>
                            </div>
                            </form>
                        </div>
                    </div>
                </div>
                <div id="submitModalBody-success" style="display: none" class="container" style="width: 100%">
                    <div class="row">
                        <div class="col-mid-4">
                            <div>
                                <h1 class="text-center">
                                    Success</h1>
                                <h5 id="submitModalBody-success-line"class="text-center">
                                    </h5>
                            </div>
                        </div>
                    </div>
                </div>
                <div id="submitModalBody-error" style="display: none" class="container" style="width: 100%">
                    <div class="row">
                        <div class="col-mid-4">
                            <div>
                                <h1 class="text-center">
                                    Uh-oh.</h1>
                                <h5 class="text-center">
                                    There is a problem with connection to the host.<br> Try again in a minute.</h5>
                            </div>
                        </div>
                    </div>
                </div>
              </div>
              <div id="submitModalFooter" class="modal-footer">
                 <div class='container' style='width: 100%'>
                        <div class='row'>
                            <div class='col-md-6 col-md-offset-3' style='text-align: center'>
                                <i id="loading-spinner" class='fa fa-asterisk fa-spin fa-1x' style="opacity: 0"></i>
                            </div>
                        </div>
                    </div>
               <!--<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>-->
                <!--<button id="submit" type="button" class="btn btn-primary">Submit</button>-->
              </div>
            </div><!-- /.modal-content -->
          </div><!-- /.modal-dialog -->
        </div><!-- /.modal -->

        <!-- Help Modal -->
        <div class="modal fade" id="helpModal" tabindex="-1" role="dialog" aria-labelledby="helpLabel" aria-hidden="true">
          <div class="modal-dialog">
            <div class="modal-content">
              <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h4 class="modal-title" id="helpModalLabel">
                    <h2>Xmas-pi<small> editor help</small></h2>
                </h4>
              </div>
              <div id="helpBody" class="modal-body">

                  <i class="fa fa-eraser fa-2x"></i> - Toggles eraser mode<br><br>
                  <blockquote>While in both eraser and normal mode user can 
                        'paint' bulbs by clicking and holding mouse button.</blockquote>
                  <i class="fa fa-minus-square-o fa-2x"></i> - Inverse current frame <br><br>
                  <i class="fa fa-times-circle fa-2x"></i> - Clear current frame <br><br>
                  <i class="fa fa-plus-square fa-2x"></i> - Adds new frame <br><br>
                  <blockquote>Adds current frame, copying the bulb layout present on the
                        current frame and goes right to it.</blockquote>
                  <i class="fa fa-trash-o fa-2x"></i> - Deletes frame 
              </div>
              <div class="modal-footer">
                  <div class="devbot text-center">
                      <a href="http://dev.uek.krakow.pl/" target="_blank"><img src="src/res/devbot.png"></a> 
                  </div>
              </div>
            </div><!-- /.modal-content -->
          </div><!-- /.modal-dialog -->
        </div><!-- /.modal -->
    </body>  
    <!-- SCRIPTS -->
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
    <script type="text/javascript" src="https://netdna.bootstrapcdn.com/bootstrap/3.0.2/js/bootstrap.min.js" ></script>
    <script type="text/javascript" src="src/js/xmas-pi.js"></script>
    <script type="text/javascript" src="src/js/fastclick.js"></script>
    <!-- LIGHT BULB TOGGLING -->
    <script>
        var options = {
            eraser: false  
        }

        // initiate fastClick addon
        $(function() {
            FastClick.attach(document.body);
        });
    </script>
    <script>
    $('button.light').click(function() {
        console.log($(this));
        $(this).toggleLightBulb();
    });

    $('#tree-wrapper').on("mousedown", function() {
        $('button.light').bind('mouseover', function() {
            if ( $(this).hasClass('toggled') ) {
                console.log("bulb already toggled!");
            } else {
                if ( options.eraser == true ) {
                    $(this).turnLightBulbOff(); 
                } else {
                    $(this).turnLightBulbOn();
                }
                $(this).addClass("toggled");
            }
        });
    }).on("mouseup", function() {
        $('button.light').unbind('mouseover');
        $.each( $('button.light'), function() {
            $('button.light').removeClass("toggled");
        });
    });
    </script>
    <script>
        var smWidth = 768;

        // stupid fucking firefox 
        jQuery(function($) {
            $('#next-frame').click(function() {
                if ( window.matchMedia("(max-width:" + smWidth + "px)").matches ) {
                    $('#tree-wrapper').nextFrameWithoutAnimation();
                } else {
                    $('#tree-wrapper').nextFrame();
                }
            });
            $('#previous-frame').click(function() {
                if ( window.matchMedia("(max-width:" + smWidth + "px)").matches ) {
                    $('#tree-wrapper').previousFrameWithoutAnimation();
                } else {
                    $('#tree-wrapper').previousFrame();
                }
            });
            $('#add-frame').click(function() {
                if ( window.matchMedia("(max-width:" + smWidth + "px)").matches ) {
                    $('#tree-wrapper').addFrameWithoutAnimation();
                } else {
                    $('#tree-wrapper').addFrame();
                }
            });
            $('#delete-frame').click(function() {
                if ( window.matchMedia("(max-width:" + smWidth + "px)").matches ) {
                    $('#tree-wrapper').deleteFrameWithoutAnimation($().getFramesCount());
                } else {
                    $('#tree-wrapper').deleteFrame($().getFramesCount());
                }
            });
            $('#inverse-frame').click(function() {
                $('#tree-wrapper').inverseFrame();
            });
            $('#clear-frame').click(function() {
                $('#tree-wrapper').clearFrame();
                $().resetValues();
            });
            $('#to-json').click(function() {
                $('#submitModalBody-form').attr("style", "display: inline");
                $('#submitModalBody-success').attr("style", "display: none");
                $('#submitModalBody-error').attr("style", "display: none");
                $('#loading-spinner').attr("style", "opacity: 0");
            })
            $('#submit').click(function() {
                var data = $('#tree-wrapper').getFrames();
                $().ajaxPost(data);
            });
            $('#toggle-eraser').click(function() {
                if ( options.eraser == true ) {
                    options.eraser = false; 
                } else {
                    options.eraser = true; 
                }  
            })
            $('#playback').click(function() {
                $('#tree-wrapper').playback($().getFrames(), 200);
            })
        })
    </script>
    <script> // no double tap zoom
        (function($) {
          $.fn.nodoubletapzoom = function() {
              $(this).bind('touchstart', function preventZoom(e) {
                var t2 = e.timeStamp
                  , t1 = $(this).data('lastTouch') || t2
                  , dt = t2 - t1
                  , fingers = e.originalEvent.touches.length;
                $(this).data('lastTouch', t2);
                if (!dt || dt > 500 || fingers > 1) return; // not double-tap

                e.preventDefault(); // double tap - prevent the zoom
                // also synthesize click events we just swallowed up
                $(this).trigger('click').trigger('click');
              });
          };
        })(jQuery);
    </script>
</html>
